services:
  tring-bot:
    container_name: tring-bot
    image: tring-bot
    build:
      context: ../tring-databot
      dockerfile: dockerfile
    ports:
      - 3031:3000
    environment:
      - "NUXT_ADMIN_URL=https://tring-admin.pripod.com"
      - "NUXT_LLM_URL=http://148.113.16.40:6999"
      - "NUXT_DB_URL=postgresql://postgres:1e095c56156fbae71397e0d406f80ad7b344507adfe44104936d5edfb5358c6b@148.113.16.40:5432/tring"
      - "NUXT_REDIS_URL=redis://default:bab741657e6668cac3355a1ebd625e76c102144b4cc870157fbbe146ebaedae4@148.113.16.40:6380/1"
    volumes:
      - tring-suite_bot:/app/node_modules
    restart: on-failure
  tring-admin-panel:
    container_name: tring-admin-panel
    image: tring-admin-panel
    build:
      context: .
      dockerfile: dockerfile
    ports:
      - 3030:3000
    environment:
      - "NUXT_DB_URL=postgresql://postgres:1e095c56156fbae71397e0d406f80ad7b344507adfe44104936d5edfb5358c6b@148.113.16.40:5432/tring"
      - "NUXT_REDIS_URL=redis://default:bab741657e6668cac3355a1ebd625e76c102144b4cc870157fbbe146ebaedae4@148.113.16.40:6380/1"
      - "NUXT_LLM_BASE_URL=http://148.113.16.40:6999"
      - "NUXT_BOT_BASE_URL=https://tring-databot.pripod.com"
      - "NUXT_REDIRECT_URL=https://tring-admin.pripod.com/settings"
      - "NUXT_LOGO_DIR=/app"
      - "NUXT_LLM_CALLBACK_URL=https://tring-admin.pripod.com"
      - "NUXT_ADMIN_URL=https://tring-admin.pripod.com"
    volumes:
      - tring-suite_admin:/app/node_modules
      - tring-admin_docs:/app/assets/docs
    restart: on-failure

volumes:
  tring-suite_bot:
  tring-suite_admin:
  tring-admin_docs:
